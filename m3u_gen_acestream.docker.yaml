# Ace Stream Engine address in format of host:port.
# This value is set via environment variable ACESTREAM_ENGINE_ADDR
engineAddr: ${ACESTREAM_ENGINE_ADDR}
#
# HTTPAceProxy address in format of host:port.
# This value is set via environment variable HTTPACEPROXY_ADDR
# Default: 127.0.0.1:8000
httpAceProxyAddr: ${HTTPACEPROXY_ADDR}
#
# Playlists to generate.
playlists:
#
# MPEG-TS format, all.
# Change any non-default category to 'other'.
- #
  # Destination filepath to write playlist to.
  outputPath: ./out/playlist_mpegts.m3u8
  #
  # Template for the header of M3U file.
  headerTemplate: |
    #EXTM3U url-tvg="http://epg.one/epg2.xml.gz" tvg-shift=0 deinterlace=1 m3uautoload=1
  #
  # Template for each channel. Available variables are:
  # {{.Name}}
  # {{.Infohash}}
  # {{.Categories}}
  # {{.Countries}}
  # {{.Languages}}
  # {{.EngineAddr}}
  # {{.TVGName}}
  # {{.IconURL}}
  entryTemplate: |
    #EXTINF:-1 group-title="{{.Categories}}",{{.Name}}
    http://{{.EngineAddr}}/ace/getstream?infohash={{.Infohash}}
  #
  # Change categories by category regular expressions (keys) to strings (values).
  # Use '^$' regular expression to match unset categories.
  # Example:
  # categoryRxToCategoryMap:
  #   '^category regexp A$': 'becomes category B'
  #   '^category regexp C$': 'becomes category D'
  categoryRxToCategoryMap:
    ^(?!.*(informational|entertaining|educational|movies|documentaries|sport|fashion|music|regional|ethnic|religion|teleshop|erotic_18_plus|other_18_plus|cyber_games|amateur|webcam)).*: other
  #
  # Set categories by name regular expressions (keys) to list of strings (values).
  # Example:
  # nameRxToCategoriesMap:
  #   '^name regexp A$':
  #   - 'will have category B'
  #   - 'and category C'
  #   '^name regexp D$':
  #   - 'will have category E'
  #   - 'and category F'
  nameRxToCategoriesMap: {}
  #
  # Only keep channels which name matches any of these regular expressions.
  # Example:
  # nameRxFilter:
  # - '.*keep channels matching name A.*'
  # - '.*keep channels matching name B.*'
  nameRxFilter: ${NAME_RX_FILTER_YAML}
  #
  # Remove channels which name matches any of these regular expressions.
  # Example:
  # nameRxBlacklist:
  # - '.*remove channels matching name A.*'
  # - '.*remove channels matching name B.*'
  nameRxBlacklist: ${NAME_RX_BLACKLIST_YAML}
  #
  # Only keep channels which category equals to any of these.
  # See https://docs.acestream.net/developers/knowledge-base/list-of-categories/
  # for known (but not all possible) categories list.
  # Use empty string to include results with unset category.
  # Example:
  # categoriesFilter:
  # - 'keep channels with category A'
  # - 'keep channels with category B'
  categoriesFilter: ${CATEGORIES_FILTER_YAML}
  #
  # If true, only keep channels with categories that are in filter, but not any other.
  categoriesFilterStrict: ${CATEGORIES_FILTER_STRICT}
  #
  # Remove channels which category equals to any of these.
  # See https://docs.acestream.net/developers/knowledge-base/list-of-categories/
  # for known (but not all possible) categories list.
  # Use empty string to exclude results with unset category.
  # Example:
  # categoriesBlacklist:
  # - 'remove channels with category A'
  # - 'remove channels with category B'
  categoriesBlacklist: ${CATEGORIES_BLACKLIST_YAML}
  #
  # Only keep channels which language equals to any of these.
  # Languages are 3-character, lower case strings, such as 'eng', 'rus' etc.
  # Use empty string to include results with unset language.
  # Example:
  # languagesFilter:
  # - 'keep channels with language A'
  # - 'keep channels with language B'
  languagesFilter: ${LANGUAGES_FILTER_YAML}
  #
  # If true, only keep channels with languages that are in filter, but not any other.
  languagesFilterStrict: ${LANGUAGES_FILTER_STRICT}
  #
  # Remove channels which language equals to any of these.
  # Languages are 3-character, lower case strings, such as 'eng', 'rus' etc.
  # Use empty string to exclude results with unset language.
  # Example:
  # languagesBlacklist:
  # - 'remove channels with language A'
  # - 'remove channels with language B'
  languagesBlacklist: ${LANGUAGES_BLACKLIST_YAML}
  #
  # Only keep channels which country equals to any of these.
  # Countries are 2-character, lower case strings, such as 'us', 'ru' etc. and 'int' for international.
  # Use empty string to include results with unset country.
  # Example:
  # countriesFilter:
  # - 'keep channels with country A'
  # - 'keep channels with country B'
  countriesFilter: ${COUNTRIES_FILTER_YAML}
  #
  # If true, only keep channels with countries that are in filter, but not any other.
  countriesFilterStrict: ${COUNTRIES_FILTER_STRICT}
  #
  # Remove channels which country equals to any of these.
  # Countries are 2-character, lower case strings, such as 'us', 'ru' etc. and 'int' for international.
  # Use empty string to exclude results with unset country.
  # Example:
  # countriesBlacklist:
  # - 'remove channels with country A'
  # - 'remove channels with country B'
  countriesBlacklist: ${COUNTRIES_BLACKLIST_YAML}
  #
  # Only keep channels which status equals to any of these.
  # Can be 1 (no guaranty that channel is working) or 2 (channel is available).
  # Example:
  # statusFilter:
  # - 1
  # - 2
  statusFilter:
  - 2
  #
  # Only keep channels which availability equals to or more than this.
  # Can be between 0.0 (zero availability) and 1.0 (full availability).
  # The lower this value is, the less channels gets removed.
  availabilityThreshold: 1.0
  #
  # Only keep channels which availability was updated that much time ago or sooner.
  # The lower this value is, the more channels gets removed.
  availabilityUpdatedThreshold: 36h0m0s
  #
  # Remove sources that does not respond with any content.
  removeDeadSources: false
  #
  # Try to read TS packets when removing dead sources.
  useMpegTsAnalyzer: false
  #
  # Timeout for reading Ace Stream Engine response when removing dead sources.
  checkRespTimeout: 20s
  #
  # Template of the link to check when removing dead sources.
  # Available variables are:
  # {{.Infohash}}
  # {{.EngineAddr}}
  removeDeadLinkTemplate: http://{{.EngineAddr}}/ace/getstream?infohash={{.Infohash}}
  #
  # Amount of simultaneous availability checks when removing dead sources.
  # Do not set above 1 if using default Ace Stream Engine without proxy.
  # If using proxy, change `removeDeadLinkTemplate` accordingly.
  removeDeadWorkers: 1
#
# HLS format, only keep tv, music and empty category.
# Change category 'tv' to 'television' and empty category to 'unknown'.
- outputPath: ./out/playlist_hls.m3u8
  headerTemplate: |
    #EXTM3U url-tvg="http://epg.one/epg2.xml.gz" tvg-shift=0 deinterlace=1 m3uautoload=1
  entryTemplate: |
    #EXTINF:-1 group-title="{{.Categories}}",{{.Name}}
    http://{{.EngineAddr}}/ace/manifest.m3u8?infohash={{.Infohash}}
  categoryRxToCategoryMap:
    ^(?!.*(informational|entertaining|educational|movies|documentaries|sport|fashion|music|regional|ethnic|religion|teleshop|erotic_18_plus|other_18_plus|cyber_games|amateur|webcam)).*: other
    #(?i)^tv$: television
    #^$: unknown
  nameRxToCategoriesMap: {}
  nameRxFilter: ${NAME_RX_FILTER_YAML}
  nameRxBlacklist: ${NAME_RX_BLACKLIST_YAML}
  categoriesFilter: ${CATEGORIES_FILTER_YAML}
  categoriesFilterStrict: ${CATEGORIES_FILTER_STRICT}
  categoriesBlacklist: ${CATEGORIES_BLACKLIST_YAML}
  languagesFilter: ${LANGUAGES_FILTER_YAML}
  languagesFilterStrict: ${LANGUAGES_FILTER_STRICT}
  languagesBlacklist: ${LANGUAGES_BLACKLIST_YAML}
  countriesFilter: ${COUNTRIES_FILTER_YAML}
  countriesFilterStrict: ${COUNTRIES_FILTER_STRICT}
  countriesBlacklist: ${COUNTRIES_BLACKLIST_YAML}
  statusFilter:
  - 2
  availabilityThreshold: 1.0
  availabilityUpdatedThreshold: 36h0m0s
  removeDeadSources: false
  useMpegTsAnalyzer: false
  checkRespTimeout: 20s
  removeDeadLinkTemplate: http://{{.EngineAddr}}/ace/getstream?infohash={{.Infohash}}
  removeDeadWorkers: 1
#
# https://github.com/pepsik-kiev/HTTPAceProxy format, all but erotic channels.
- outputPath: ./out/playlist_httpaceproxy.m3u8
  headerTemplate: |
    #EXTM3U url-tvg="http://epg.one/epg2.xml.gz" tvg-shift=0 deinterlace=1 m3uautoload=1
  entryTemplate: |
    #EXTINF:-1 group-title="{{.Categories}}",{{.Name}}
    http://${HTTPACEPROXY_ADDR}/infohash/{{.Infohash}}/stream.mp4
  categoryRxToCategoryMap:
    ^(?!.*(informational|entertaining|educational|movies|documentaries|sport|fashion|music|regional|ethnic|religion|teleshop|erotic_18_plus|other_18_plus|cyber_games|amateur|webcam)).*: other
  nameRxToCategoriesMap: {}
  nameRxFilter: ${NAME_RX_FILTER_YAML}
  nameRxBlacklist: ${NAME_RX_BLACKLIST_YAML}
  categoriesFilter: ${CATEGORIES_FILTER_YAML}
  categoriesFilterStrict: ${CATEGORIES_FILTER_STRICT}
  categoriesBlacklist: ${CATEGORIES_BLACKLIST_YAML}
  languagesFilter: ${LANGUAGES_FILTER_YAML}
  languagesFilterStrict: ${LANGUAGES_FILTER_STRICT}
  languagesBlacklist: ${LANGUAGES_BLACKLIST_YAML}
  countriesFilter: ${COUNTRIES_FILTER_YAML}
  countriesFilterStrict: ${COUNTRIES_FILTER_STRICT}
  countriesBlacklist: ${COUNTRIES_BLACKLIST_YAML}
  statusFilter:
  - 2
  availabilityThreshold: 1.0
  availabilityUpdatedThreshold: 36h0m0s
  removeDeadSources: false
  useMpegTsAnalyzer: false
  checkRespTimeout: 20s
  removeDeadLinkTemplate: http://{{.EngineAddr}}/ace/getstream?infohash={{.Infohash}}
  removeDeadWorkers: 1